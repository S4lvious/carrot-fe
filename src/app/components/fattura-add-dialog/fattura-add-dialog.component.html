<ct-dialog
  [size]="'large'"
  [title]="'Crea fattura da ordine'"
  [footerActions]="footerActions"
  class="fattura-dialog"
>
  <!-- Pannello per la Selezione Ordine -->
  <p-panel header="Seleziona Ordine" class="mb-3"  [style]="{'marginBottom': '10px'}">
    <div class="row">
      <div class="col">
        <p-ifta-label>
          <p-select
            [filter]="true"
            filterBy="id"
            [(ngModel)]="ordine"
            [optionLabel]="'id'"
            placeholder="Seleziona ordine"
            [options]="ordineSelect"
            (onChange)="selectionChange()"
          >
          </p-select>
          <label>Seleziona ordine</label>
        </p-ifta-label>
      </div>
    </div>
  </p-panel>

  <!-- Pannello con la tabella Dettagli Ordine -->
  <p-panel header="Dettagli Ordine" [style]="{'marginBottom': '10px'}">
    <div class="row">
      <div class="col">
        <p-table
          [value]="orderDetails"
          class="p-datatable-striped p-datatable-gridlines"
        >
          <ng-template pTemplate="header">
            <tr>
              <th>Prodotto</th>
              <th>Quantità</th>
              <th>Prezzo Unitario</th>
              <th>IVA</th>
              <th>Totale No Iva</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-detail let-i="rowIndex">
            <tr>
              <td>{{ detail.prodotto.nome }}</td>
              <td>{{ detail.quantita }}</td>
              <td>{{ detail.prezzoUnitario }}</td>
              <td>{{ detail.prodotto.aliquotaIVA }}</td>
              <td>{{ detail.prezzoUnitario * detail.quantita }}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </p-panel>

  <!-- Pannello per la Ritenuta -->
  <p-panel header="Ritenuta" class="mb-3" [style]="{'marginBottom': '10px'}">
    <div class="row">
      <div class="col">
        <ct-checkbox [label]="'Applica ritenuta'" [background]="true"  [(bmModel)]="applicareRitenuta"></ct-checkbox>
      </div>
      <div class="col">
        <p-ifta-label>
          <label>Ritenuta</label>
          <ct-input
            type="number"
            [disabled]="!applicareRitenuta"
            [(ctModel)]="ritenutaAcconto"
          ></ct-input>
        </p-ifta-label>
      </div>
    </div>
  </p-panel>

  <!-- Pannello per Data Scadenza e Stato -->
  <p-panel header="Scadenza e Stato" class="mb-3" [style]="{'marginBottom': '10px'}">
    <div class="row">
      <div class="col-6 p-3">
        <p-ifta-label>
          <p-date-picker [(ngModel)]="scadenza"></p-date-picker>
          <label>Seleziona data di scadenza</label>
        </p-ifta-label>
      </div>
      <div class="col-6 p-3">
        <p-ifta-label>
          <p-select [(ngModel)]="stato" [options]="['Pagata', 'Non pagata']">
          </p-select>
          <label>Seleziona stato</label>
        </p-ifta-label>
      </div>
    </div>
  </p-panel>

  <p-panel header="Ritenuta" class="mb-3" [style]="{'marginBottom': '10px'}">
    <div class="row">
      <div class="col">
        <ct-checkbox [label]="'Genera movimento in contabilità'" [background]="true"  [(bmModel)]="generaMovimento"></ct-checkbox>
      </div>
      <div class="col">
        <p style="color: gray;">
          Genererai un movimento in entrata con il valore del totale dovuto della fattura.
          La categoria del entrata sarà la categoria del primo prodotto venduto nella fattura.
          Il metodo di pagamento sarà il primo che hai impostato.
          Potrai cambiare le informazioni in seguito
        </p>
      </div>
    </div>
  </p-panel>
  

</ct-dialog>
